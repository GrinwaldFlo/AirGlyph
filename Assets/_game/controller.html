<html>
<head>
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<link rel="stylesheet" href="controller.css">
</head>
<body>

	<div class="gamepad_container" id="gc">
		<div class="head"></div>
		<div id="txthead">Welcome</div>
		<div id="txtGlyph">Last glyph</div>
		<div id="canvas_container"></div>
	</div>
	<script type="text/javascript" src="https://www.airconsole.com/api/airconsole-1.3.0.js"></script>
	<script type="text/javascript" src="airconsole-controls/rate-limiter/rate-limiter.js"></script>
	<script type="text/javascript" src="swipe-pattern.js"></script>
	<script type="text/javascript">
		var airconsole = new AirConsole({ orientation: AirConsole.ORIENTATION_PORTRAIT });
		var c = document.getElementById('canvas_container');

		airconsole.onMessage = function (from, data)
		{
			console.log("onMessage", from, data);

			if (data.charAt(0) == "#")
			{
				if (data == "#Active")
				{
					document.getElementById("canvas_container").style.backgroundColor = 'green';
					document.getElementById("txthead").innerHTML = "Your turn";
				}
				else if (data == "#Inactive")
				{
					document.getElementById("canvas_container").style.backgroundColor = 'white';
					document.getElementById("txthead").innerHTML = "Wait...";
				}
				else if (data == "#Intro")
				{
					document.getElementById("canvas_container").style.backgroundColor = 'green';
					document.getElementById("txthead").innerHTML = "Choose game and options";
				}
				else if (data == "#End")
				{
					document.getElementById("canvas_container").style.backgroundColor = 'green';
					document.getElementById("txthead").innerHTML = "Glyph More for intro";
				}
			}
			else if (data.charAt(0) == "@")
			{
				document.getElementById("txtGlyph").innerHTML = data.substring(1);
			}
			else
				document.getElementById("txthead").innerHTML = data;
		};

		var swipe = new SwipePattern(c, {
			circles: [
{ x: 216, y: 31 },
{ x: 47, y: 129 },
{ x: 47, y: 324 },
{ x: 216, y: 422 },
{ x: 384, y: 324 },
{ x: 385, y: 129 },
{ x: 131, y: 177 },
{ x: 132, y: 275 },
{ x: 300, y: 275 },
{ x: 300, y: 178 },
{ x: 216, y: 226 }
			],

			// Called when touching a new circle
			onTouchCircle: function (circle)
			{
				console.log("Touched circle", circle);
			},

			// Called on touch ends. Passes an array of touched circles
			touchend: function (touched_circles)
			{
				if (this.pathIsTouched([2, 'customId', 8], true))
				{
					console.log("2, customId, 8 Pattern MATCHES", touched_circles);
				}
				airconsole.message(AirConsole.SCREEN,
						{
							"glyph": {
								"circles": touched_circles
							}
						});
			}
		});


	</script>


</body>
</html>
